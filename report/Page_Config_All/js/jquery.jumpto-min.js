!function(a){var c={firstLevel:"> h2",secondLevel:false,innerWrapper:".jumpto-block",offset:400,animate:1000,navContainer:false,anchorTopPadding:20,showTitle:"Jump To",closeButton:true};function b(f){var d=a(f).offset().top;var e=d+a(f).parent().height();return((d<=a(window).scrollTop()+20)&&(e>=a(window).scrollTop()-20))}a.fn.jumpto=function(d){var h=a.extend({},c,d),g=a(this),f="",k=a(h.innerWrapper),e="",j="",i="";g.addClass("jumpto-cotainer");redrawMenu=function(){a(e.slice(0,-2)).each(function(l){if(b(a(this))){a(".jumpto-subnav a").removeClass("active").parent().find(" a[href='#"+a(this).attr("id")+"']").addClass("active");if(a("a[href='#"+a(this).attr("id")+"']").parent().parent().hasClass("jumpto-second")){a("a[href='#"+a(this).attr("id")+"']").closest(".jumpto-second").show()}if(a("a[href='#"+a(this).attr("id")+"']").parent().parent().hasClass("jumpto-first")){a("a[href='#"+a(this).attr("id")+"']").closest(".jumpto-first").find(".jumpto-second").hide()}if(a("a[href='#"+a(this).attr("id")+"']").parent().find(".jumpto-second")){a("a[href='#"+a(this).attr("id")+"']").parent().find(".jumpto-second").show()}}});if(a(document).scrollTop()>=h.offset){a(".jumpto-subnav").removeClass("bottom").addClass("fixed")}else{a(".jumpto-subnav").removeClass("bottom fixed")}if(a(document).scrollTop()>=g.outerHeight(true)){a(".jumpto-subnav").addClass("bottom fixed")}};k.find(h.firstLevel).each(function(n){var l=a(this),o=n,m="";if(l.parent().find(h.secondLevel).length>0){m+="<ul class='jumpto-second'>";l.parent().find(h.secondLevel).each(function(q){var r="jumpto_"+o+"_"+q;a(this).attr("id",r);link_to="<a href='#"+r+"'>"+a(this).text()+"</a>";m+="<li>"+link_to+"</li>";e+="#"+r+", "});m+="</ul>";var p="jumpto_"+o;l.attr("id",p);link_to="<a href='#"+p+"'>"+l.text()+"</a>";e+="#"+p+", ";f+="<li>"+link_to+m+"</li>"}else{var p="jumpto_"+o;link_to="<a href='#"+p+"'>"+l.text()+"</a>";l.attr("id",p);e+="#"+p+", ";f+="<li>"+link_to+"</li>"}});if(h.showTitle!=false){var j="<div class='jumpto-title'>"+h.showTitle+"</div>"}if(h.closeButton!=false){var i="<div class='jumpto-close'><a href='#' id='jumpto-close'>Close</a></div>"}if(h.navContainer==false){a(this).append("<nav class='jumpto-subnav'>"+j+"<ul class='jumpto-first'>"+f+"</ul>"+i+"</nav>")}else{a(h.navContainer).addClass("jumpto-subnav").html(j+"<ul class='jumpto-first'>"+f+"</ul>"+i)}a(".jumpto-subnav a[href*=#]:not([href=#])").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")||location.hostname==this.hostname){var l=a(this.hash);l=l.length?l:a("[name="+this.hash.slice(1)+"]");if(l.length){a("html,body").animate({scrollTop:l.offset().top-h.anchorTopPadding},h.animate,"swing");return false}}});a(window).scroll(function(){redrawMenu()});a(".jumpto-subnav #jumpto-close").click(function(){var l=a(this);l.parent().parent().find("> .jumpto-first").slideToggle("slow",function(){if(a(this).is(":visible")){l.html("Close")}else{l.html("Open")}});return false});setInterval(function(){var l=[];a(e.slice(0,-2)).each(function(m){l.push(b(a(this)))});if(a.inArray(true,l)==-1){a(".jumpto-subnav a").removeClass("active");a(".jumpto-subnav .jumpto-second").hide()}},500)}}(window.jQuery);